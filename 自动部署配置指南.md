# ğŸ¤– å…¨è‡ªåŠ¨éƒ¨ç½²é…ç½®æŒ‡å—

## ğŸ“‹ å‰ææ¡ä»¶

- GitHub è´¦å·
- Netlify è´¦å·

## ğŸš€ ä¸€æ¬¡æ€§é…ç½®æ­¥éª¤

### æ­¥éª¤ 1ï¼šåˆ›å»º GitHub ä»“åº“å¹¶æ¨é€ä»£ç 

```bash
# 1. åˆå§‹åŒ– Git ä»“åº“
git init
git add .
git commit -m "åˆå§‹æäº¤ï¼šé…ç½®å…¨è‡ªåŠ¨éƒ¨ç½²"

# 2. åœ¨ GitHub åˆ›å»ºæ–°ä»“åº“
# è®¿é—®ï¼šhttps://github.com/new

# 3. æ¨é€ä»£ç 
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å.git
git branch -M main
git push -u origin main
```

### æ­¥éª¤ 2ï¼šåœ¨ Netlify åˆ›å»ºç«™ç‚¹

#### æ–¹æ³• Aï¼šé€šè¿‡ Netlify ç½‘ç«™ï¼ˆæ¨èï¼‰

1. è®¿é—® [Netlify](https://app.netlify.com/)
2. ç‚¹å‡» "Add new site" â†’ "Import an existing project"
3. é€‰æ‹© GitHub å¹¶æˆæƒ
4. é€‰æ‹©ä½ çš„ä»“åº“
5. éƒ¨ç½²é…ç½®ä¼šè‡ªåŠ¨è¯»å– `netlify.toml`
6. ç‚¹å‡» "Deploy site"

#### æ–¹æ³• Bï¼šé€šè¿‡ Netlify CLI

```bash
# å®‰è£… Netlify CLI
npm install -g netlify-cli

# ç™»å½•
netlify login

# åˆå§‹åŒ–ç«™ç‚¹
netlify init

# é¦–æ¬¡éƒ¨ç½²
netlify deploy --prod
```

### æ­¥éª¤ 3ï¼šè·å– Netlify å‡­è¯

#### 3.1 è·å– NETLIFY_AUTH_TOKEN

1. è®¿é—® [Netlify Personal Access Tokens](https://app.netlify.com/user/applications#personal-access-tokens)
2. ç‚¹å‡» "New access token"
3. è¾“å…¥æè¿°ï¼š`GitHub Actions è‡ªåŠ¨éƒ¨ç½²`
4. ç‚¹å‡» "Generate token"
5. **å¤åˆ¶ç”Ÿæˆçš„ token**ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼ï¼‰

#### 3.2 è·å– NETLIFY_SITE_ID

**æ–¹æ³• 1ï¼šä» Netlify ç½‘ç«™**
1. è¿›å…¥ä½ çš„ç«™ç‚¹è®¾ç½®
2. åœ¨ "Site details" ä¸­æ‰¾åˆ° "Site ID"
3. å¤åˆ¶è¿™ä¸ª ID

**æ–¹æ³• 2ï¼šä» CLI**
```bash
netlify status
# æŸ¥æ‰¾ "Site Id" å­—æ®µ
```

### æ­¥éª¤ 4ï¼šåœ¨ GitHub é…ç½®å¯†é’¥

1. è¿›å…¥ä½ çš„ GitHub ä»“åº“
2. ç‚¹å‡» "Settings"ï¼ˆè®¾ç½®ï¼‰
3. å·¦ä¾§èœå•é€‰æ‹© "Secrets and variables" â†’ "Actions"
4. ç‚¹å‡» "New repository secret"

æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªå¯†é’¥ï¼š

**å¯†é’¥ 1ï¼š**
- Name: `NETLIFY_AUTH_TOKEN`
- Value: ç²˜è´´ä½ ä» Netlify å¤åˆ¶çš„ token

**å¯†é’¥ 2ï¼š**
- Name: `NETLIFY_SITE_ID`
- Value: ç²˜è´´ä½ çš„ Netlify Site ID

### æ­¥éª¤ 5ï¼šå¯ç”¨ GitHub Actions

1. åœ¨ GitHub ä»“åº“ä¸­ï¼Œç‚¹å‡» "Actions" æ ‡ç­¾
2. å¦‚æœçœ‹åˆ°æç¤ºï¼Œç‚¹å‡» "I understand my workflows, go ahead and enable them"

## âœ… å®Œæˆï¼ç°åœ¨æ˜¯å…¨è‡ªåŠ¨çš„

### ğŸ‰ è‡ªåŠ¨éƒ¨ç½²è§¦å‘æ¡ä»¶ï¼š

- âœ… **æ¨é€åˆ° main åˆ†æ”¯** â†’ è‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- âœ… **åˆ›å»º Pull Request** â†’ è‡ªåŠ¨ç”Ÿæˆé¢„è§ˆé“¾æ¥
- âœ… **æ›´æ–° PR** â†’ é¢„è§ˆè‡ªåŠ¨æ›´æ–°
- âœ… **æ‰‹åŠ¨è§¦å‘** â†’ åœ¨ GitHub Actions é¡µé¢æ‰‹åŠ¨è¿è¡Œ

### ğŸ“ æ—¥å¸¸ä½¿ç”¨æµç¨‹ï¼š

```bash
# 1. ä¿®æ”¹ä»£ç 
# ç¼–è¾‘ index.html, style.css ç­‰æ–‡ä»¶

# 2. æäº¤æ›´æ”¹
git add .
git commit -m "æ›´æ–°ç½‘ç«™å†…å®¹"

# 3. æ¨é€åˆ° GitHub
git push

# 4. ç­‰å¾… 30 ç§’ - 1 åˆ†é’Ÿ
# GitHub Actions ä¼šè‡ªåŠ¨ï¼š
#   - æ£€å‡ºä»£ç 
#   - éƒ¨ç½²åˆ° Netlify
#   - åœ¨ commit ä¸­æ·»åŠ éƒ¨ç½²çŠ¶æ€è¯„è®º

# 5. å®Œæˆï¼è®¿é—®ä½ çš„ç½‘ç«™æŸ¥çœ‹æ›´æ–°
```

## ğŸ” ç›‘æ§éƒ¨ç½²çŠ¶æ€

### æŸ¥çœ‹éƒ¨ç½²è¿›åº¦ï¼š

1. **GitHub æ–¹å¼ï¼š**
   - è¿›å…¥ä»“åº“çš„ "Actions" æ ‡ç­¾
   - æŸ¥çœ‹æœ€æ–°çš„å·¥ä½œæµè¿è¡ŒçŠ¶æ€
   - ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

2. **Netlify æ–¹å¼ï¼š**
   - è®¿é—® Netlify æ§åˆ¶å°
   - æŸ¥çœ‹ "Deploys" æ ‡ç­¾
   - å®æ—¶æŸ¥çœ‹æ„å»ºæ—¥å¿—

3. **è‡ªåŠ¨é€šçŸ¥ï¼š**
   - GitHub ä¼šåœ¨ commit ä¸‹æ–¹è‡ªåŠ¨æ·»åŠ è¯„è®º
   - æ˜¾ç¤ºéƒ¨ç½²çŠ¶æ€å’Œé¢„è§ˆé“¾æ¥

## ğŸ› ï¸ é«˜çº§é…ç½®

### è‡ªå®šä¹‰æ„å»ºæµç¨‹

å¦‚æœä½ éœ€è¦æ„å»ºæ­¥éª¤ï¼ˆå¦‚ä½¿ç”¨æ„å»ºå·¥å…·ï¼‰ï¼Œä¿®æ”¹ `.github/workflows/deploy.yml`ï¼š

```yaml
steps:
  - name: ğŸ“¥ æ£€å‡ºä»£ç 
    uses: actions/checkout@v4
  
  # æ·»åŠ  Node.js ç¯å¢ƒ
  - name: ğŸ”§ è®¾ç½® Node.js
    uses: actions/setup-node@v4
    with:
      node-version: '18'
  
  # å®‰è£…ä¾èµ–
  - name: ğŸ“¦ å®‰è£…ä¾èµ–
    run: npm install
  
  # æ„å»ºé¡¹ç›®
  - name: ğŸ—ï¸ æ„å»ºé¡¹ç›®
    run: npm run build
  
  # éƒ¨ç½²æ„å»ºç»“æœ
  - name: ğŸš€ éƒ¨ç½²åˆ° Netlify
    uses: nwtgck/actions-netlify@v2.1
    with:
      publish-dir: './dist'  # æ”¹ä¸ºæ„å»ºè¾“å‡ºç›®å½•
      # ... å…¶ä»–é…ç½®
```

### æ·»åŠ ç¯å¢ƒå˜é‡

åœ¨ `.github/workflows/deploy.yml` ä¸­æ·»åŠ ï¼š

```yaml
env:
  NODE_ENV: production
  API_URL: ${{ secrets.API_URL }}
```

ç„¶ååœ¨ GitHub Secrets ä¸­æ·»åŠ ç›¸åº”çš„å¯†é’¥ã€‚

### éƒ¨ç½²åˆ°å¤šä¸ªç¯å¢ƒ

åˆ›å»º `.github/workflows/deploy-staging.yml` ç”¨äºæµ‹è¯•ç¯å¢ƒï¼š

```yaml
name: éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ

on:
  push:
    branches:
      - develop

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      # ... ç±»ä¼¼çš„æ­¥éª¤
    env:
      NETLIFY_SITE_ID: ${{ secrets.NETLIFY_STAGING_SITE_ID }}
```

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šActions æ— æ³•è®¿é—®å¯†é’¥

**è§£å†³æ–¹æ¡ˆï¼š**
- ç¡®è®¤å¯†é’¥åç§°æ‹¼å†™æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
- ç¡®è®¤å¯†é’¥å·²ä¿å­˜åˆ°æ­£ç¡®çš„ä»“åº“
- æ£€æŸ¥ Actions æƒé™è®¾ç½®

### é—®é¢˜ 2ï¼šéƒ¨ç½²å¤±è´¥ "Unauthorized"

**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥ NETLIFY_AUTH_TOKEN æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ token æ²¡æœ‰è¿‡æœŸ
- é‡æ–°ç”Ÿæˆ token å¹¶æ›´æ–° GitHub Secret

### é—®é¢˜ 3ï¼šæ‰¾ä¸åˆ°ç«™ç‚¹

**è§£å†³æ–¹æ¡ˆï¼š**
- ç¡®è®¤ NETLIFY_SITE_ID æ­£ç¡®
- ç¡®è®¤å·²åœ¨ Netlify åˆ›å»ºç«™ç‚¹
- æ£€æŸ¥ token æ˜¯å¦æœ‰è¯¥ç«™ç‚¹çš„è®¿é—®æƒé™

### é—®é¢˜ 4ï¼šæ„å»ºè¶…æ—¶

**è§£å†³æ–¹æ¡ˆï¼š**
- å¢åŠ  `timeout-minutes` å€¼
- ä¼˜åŒ–æ„å»ºæµç¨‹
- æ£€æŸ¥æ˜¯å¦æœ‰æ­»å¾ªç¯æˆ–å¡ä½çš„æ­¥éª¤

## ğŸ“Š éƒ¨ç½²å¾½ç« 

åœ¨ README.md ä¸­æ·»åŠ éƒ¨ç½²çŠ¶æ€å¾½ç« ï¼š

```markdown
[![éƒ¨ç½²çŠ¶æ€](https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å/actions/workflows/deploy.yml/badge.svg)](https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å/actions/workflows/deploy.yml)
```

## ğŸ”— æœ‰ç”¨çš„é“¾æ¥

- [GitHub Actions æ–‡æ¡£](https://docs.github.com/actions)
- [Netlify CLI æ–‡æ¡£](https://docs.netlify.com/cli/get-started/)
- [actions-netlify æ–‡æ¡£](https://github.com/nwtgck/actions-netlify)

## ğŸ’¡ æœ€ä½³å®è·µ

1. **åˆ†æ”¯ç­–ç•¥ï¼š**
   - `main` åˆ†æ”¯ç”¨äºç”Ÿäº§ç¯å¢ƒ
   - `develop` åˆ†æ”¯ç”¨äºå¼€å‘ç¯å¢ƒ
   - åŠŸèƒ½åˆ†æ”¯é€šè¿‡ PR åˆå¹¶

2. **æäº¤ä¿¡æ¯ï¼š**
   - ä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯
   - ä¾¿äºè¿½è¸ªéƒ¨ç½²å†å²

3. **ä»£ç å®¡æŸ¥ï¼š**
   - åˆ©ç”¨ PR é¢„è§ˆåŠŸèƒ½
   - åœ¨åˆå¹¶å‰æ£€æŸ¥é¢„è§ˆæ•ˆæœ

4. **å›æ»šï¼š**
   - åœ¨ Netlify æ§åˆ¶å°å¯ä»¥å¿«é€Ÿå›æ»š
   - æˆ–ä½¿ç”¨ `git revert` åæ¨é€

5. **ç›‘æ§ï¼š**
   - å®šæœŸæŸ¥çœ‹éƒ¨ç½²æ—¥å¿—
   - è®¾ç½® Netlify éƒ¨ç½²é€šçŸ¥

---

## ğŸŠ æ­å–œï¼

ä½ ç°åœ¨æ‹¥æœ‰ä¸€ä¸ªå®Œå…¨è‡ªåŠ¨åŒ–çš„éƒ¨ç½²æµç¨‹ï¼š

```
ä¿®æ”¹ä»£ç  â†’ git push â†’ è‡ªåŠ¨éƒ¨ç½² â†’ ç½‘ç«™æ›´æ–° âœ¨
```

ä¸å†éœ€è¦ä»»ä½•æ‰‹åŠ¨æ“ä½œï¼ğŸš€

